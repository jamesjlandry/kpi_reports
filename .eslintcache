[{"/Users/jameslandry/Desktop/Projects/kpi_reports/src/index.js":"1","/Users/jameslandry/Desktop/Projects/kpi_reports/src/App.js":"2","/Users/jameslandry/Desktop/Projects/kpi_reports/src/reportWebVitals.js":"3","/Users/jameslandry/Desktop/Projects/kpi_reports/src/components/PieChart.js":"4","/Users/jameslandry/Desktop/Projects/kpi_reports/src/components/FertRates.js":"5","/Users/jameslandry/Desktop/Projects/kpi_reports/src/components/CleavageRates.js":"6","/Users/jameslandry/Desktop/Projects/kpi_reports/src/components/PregnancyRates.js":"7","/Users/jameslandry/Desktop/Projects/kpi_reports/src/components/PregRateByAge.js":"8","/Users/jameslandry/Desktop/Projects/kpi_reports/src/components/USRates.js":"9","/Users/jameslandry/Desktop/Projects/kpi_reports/src/components/BarChart.js":"10","/Users/jameslandry/Desktop/Projects/kpi_reports/src/components/MiscKPIs.js":"11","/Users/jameslandry/Desktop/Projects/kpi_reports/src/components/EditProfile.js":"12","/Users/jameslandry/Desktop/Projects/kpi_reports/src/components/PrivateRoute.js":"13","/Users/jameslandry/Desktop/Projects/kpi_reports/src/components/LogIn.js":"14","/Users/jameslandry/Desktop/Projects/kpi_reports/src/components/ForgotPassword.js":"15","/Users/jameslandry/Desktop/Projects/kpi_reports/src/contexts/AuthContext.js":"16","/Users/jameslandry/Desktop/Projects/kpi_reports/src/firebase.js":"17","/Users/jameslandry/Desktop/Projects/kpi_reports/src/components/Dashboard.js":"18"},{"size":500,"mtime":1611691145692,"results":"19","hashOfConfig":"20"},{"size":934,"mtime":1616512050884,"results":"21","hashOfConfig":"20"},{"size":362,"mtime":1611691145693,"results":"22","hashOfConfig":"20"},{"size":7514,"mtime":1616792527816,"results":"23","hashOfConfig":"20"},{"size":923,"mtime":1616602566702,"results":"24","hashOfConfig":"20"},{"size":972,"mtime":1616877214531,"results":"25","hashOfConfig":"20"},{"size":1983,"mtime":1616706406159,"results":"26","hashOfConfig":"20"},{"size":922,"mtime":1616602576084,"results":"27","hashOfConfig":"20"},{"size":914,"mtime":1616787529008,"results":"28","hashOfConfig":"20"},{"size":1381,"mtime":1616603121952,"results":"29","hashOfConfig":"20"},{"size":2031,"mtime":1616875385817,"results":"30","hashOfConfig":"20"},{"size":2724,"mtime":1615760239353,"results":"31","hashOfConfig":"20"},{"size":411,"mtime":1614114994222,"results":"32","hashOfConfig":"20"},{"size":2062,"mtime":1616430399478,"results":"33","hashOfConfig":"20"},{"size":1453,"mtime":1616430429892,"results":"34","hashOfConfig":"20"},{"size":1171,"mtime":1615841477359,"results":"35","hashOfConfig":"20"},{"size":579,"mtime":1615828114986,"results":"36","hashOfConfig":"20"},{"size":19528,"mtime":1616877210434,"results":"37","hashOfConfig":"20"},{"filePath":"38","messages":"39","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},"qwnx1o",{"filePath":"41","messages":"42","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"43","usedDeprecatedRules":"40"},{"filePath":"44","messages":"45","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"46","messages":"47","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"48","usedDeprecatedRules":"49"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"54","messages":"55","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"56","messages":"57","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"60","messages":"61","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"62","messages":"63","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"64","messages":"65","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"66","messages":"67","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"68","messages":"69","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"70","usedDeprecatedRules":"40"},{"filePath":"71","messages":"72","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"73","messages":"74","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"75","messages":"76","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"77","messages":"78","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"79","usedDeprecatedRules":"40"},"/Users/jameslandry/Desktop/Projects/kpi_reports/src/index.js",[],["80","81"],"/Users/jameslandry/Desktop/Projects/kpi_reports/src/App.js",["82"],"import React, { useState } from 'react'\nimport './App.css';\nimport { AuthProvider } from './contexts/AuthContext'\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom'\nimport PrivateRoute from './components/PrivateRoute'\nimport ForgotPassword from './components/ForgotPassword'\nimport EditProfile from './components/EditProfile'\nimport Dashboard from './components/Dashboard'\nimport LogIn from './components/LogIn.js'\n\n\n\n\nfunction App() {\n\n  return (\n    <div className=\"App\">\n      <Router>\n        <AuthProvider>\n          <Switch>\n            <PrivateRoute exact path=\"/\" component={Dashboard} />\n            <PrivateRoute path=\"/edit-profile\" component={EditProfile} />\n            <Route path=\"/login\" component={LogIn} />\n            <Route path=\"/forgot-password\" component={ForgotPassword} />\n          </Switch>\n        </AuthProvider>\n      </Router>\n      \n    </div>\n  );\n}\n\nexport default App;\n\n\n\n\n\n\n\n","/Users/jameslandry/Desktop/Projects/kpi_reports/src/reportWebVitals.js",[],"/Users/jameslandry/Desktop/Projects/kpi_reports/src/components/PieChart.js",["83"],"import React from 'react';\nimport { Doughnut, Chart } from 'react-chartjs-2'\n\nlet PieChart = (props) => {\n\nlet total = props.total\n\n    const data = {\n        labels: [],\n        datasets: [\n            {\n                data: [\n\n                ],\n                backgroundColor: [\n                    'rgba(255, 99, 132, 0.9',\n                    'rgba(54, 162, 235, 0.9',\n                    'rgba(255, 206, 86, 0.9',\n                    'rgba(255,159,64, 0.9',\n                    'rgba(75, 192, 192, 0.9',\n                    'rgba(153, 102, 255, 0.9'\n                ]\n            }\n        ]\n    }\n\n    const techKeys = Object.keys(props.tData)\n\n    techKeys.forEach(key => {\n        data.labels.push(key)\n        data.datasets[0].data.push(props.tData[key])\n    })\n\n\n\n\n\n    const lineOptions = {\n        maintainAspectRatio: false,\n        cutoutPercentage: 60,\n        tooltips: {\n            enabled: true,\n            callbacks: {\n                label: function (tooltipItem, data) {\n\n                    let dataset = data.datasets[tooltipItem.datasetIndex];\n                    let total = dataset.data.reduce(function (previousValue, currentValue, currentIndex, array) {\n                        return previousValue + currentValue;\n                    });\n                    let currentValue = dataset.data[tooltipItem.index];\n                    let percentage = (((currentValue / total) * 100) ).toFixed(2);\n                    return percentage + \"%\";\n                },\n                title: function (tooltipItem, data) {\n                    return data.labels[tooltipItem[0].index];\n                },\n\n\n            },\n\n        },\n        legend: {\n            display: false\n        },\n        layout: {\n            padding: {\n                left: 0,\n                right: 0,\n                top: 30,\n                bottom: 50\n            },\n           \n\n        },\n      \n        animation: {\n            duration: 1,\n            onComplete: function () {\n                let chartInstance = this.chart, radian = 0, middleRadian,\n                    ctx = chartInstance.ctx;\n\n                function drawLine(pointA, pointB) {\n                    ctx.beginPath();\n                    ctx.moveTo(pointA.x, pointA.y);\n                    ctx.lineTo(pointB.x, pointB.y);\n                    ctx.stroke()\n                }\n\n                Chart.defaults.global.defaultFontSize = 12;\n                Chart.defaults.global.defaultFontFamily = 'PingFangTC';\n                Chart.defaults.global.defaultFontStyle = '400';\n                ctx.font = Chart.helpers.fontString(Chart.defaults.global.defaultFontSize, Chart.defaults.global.defaultFontStyle, Chart.defaults.global.defaultFontFamily);\n                ctx.textAlign = 'center';\n                ctx.textBaseline = 'bottom';\n\n\n                let canvasWidth = chartInstance.chartArea.right\n                let canvasHeight = chartInstance.chartArea.bottom\n\n                let chart = {\n                    radius: (chartInstance.chartArea.bottom - chartInstance.chartArea.top) / 2,\n                    labelRadius: (chartInstance.chartArea.bottom - chartInstance.chartArea.top) / 2 + 20,\n                    midPoint: {\n                        y: (canvasHeight + 50) / 2,\n                        x: canvasWidth / 2\n                    }\n                }\n\n                this.data.datasets.forEach(function (dataset, i) {\n                    let meta = chartInstance.controller.getDatasetMeta(i);\n\n                    let labels = meta.data.map(function (bar, index) {\n                        let data = dataset.data[index], dataPercentage, dataName;\n                        let centerAngle = bar._model.circumference;\n                        radian = radian + centerAngle;\n                        middleRadian = radian - centerAngle / 2\n                        dataPercentage = (((data / meta.total) * 100) ).toFixed(1)\n                        dataName = bar._model.label\n\n                        const text = dataName + ':' + dataPercentage + '%'\n                        const size = ctx.measureText(text)\n\n                        return Label.for({ chart, at: middleRadian, text, size })\n                    });\n\n                    let overlapping = findOverlapping(labels)\n                    while (overlapping) {\n                        let [label1, label2] = overlapping\n                        label1.radian -= 0.1\n                        label2.radian += 0.1\n                        overlapping = findOverlapping(labels)\n                    }\n\n                    labels.forEach(label => {\n\n                        // drawLine(label, label.chartSurface)\n\n                        ctx.fillStyle = '#222'\n                        ctx.fillText(label.text, label.x, label.y);\n                    })\n\n\n                });\n            }\n        }\n\n\n    }\n\n    return (\n        <div>\n            { total ? \n                <div className=\"total\">\n                    <Doughnut\n                        data={data}\n                        options={lineOptions}\n                    />\n\n\n                    </div>\n                : \n                    <div className=\"doughnut\">\n                    <Doughnut\n                        data={data}\n                        options={lineOptions}\n                    />\n\n\n                </div>}\n\n        </div>\n       \n    \n\n    )\n}\n\nclass Label {\n\n    constructor({ chart, radian, text, size }) {\n        this.chart = chart\n        this.originalRadian = radian\n        this.radian = radian\n        this.text = text\n        this.size = size\n    }\n\n    get x() {\n        let { midPoint, labelRadius } = this.chart\n        return midPoint.x + Math.sin(this.radian) * labelRadius;\n    }\n\n    get y() {\n        let { midPoint, labelRadius } = this.chart\n        return midPoint.y - Math.cos(this.radian) * labelRadius;\n    }\n\n    get leftSide() {\n        return this.x - this.size.width / 2 \n    }\n\n    get rightSide() {\n        return this.x + this.size.width / 2 \n    }\n\n    get topSide() {\n        return this.y - 12 \n    }\n\n    get bottomSide() {\n        return this.y \n    }\n\n    get chartSurface() {\n        const { midPoint, radius } = this.chart\n        return {\n            x: midPoint.x + Math.sin(this.originalRadian) * (radius),\n            y: midPoint.y - Math.cos(this.originalRadian) * (radius)\n        }\n    }\n\n    static for({ chart, at: radian, text, size }) {\n        return new Label({ chart, radian, text, size })\n    }\n\n}\n\nfunction findOverlapping(labels) {\n    for (let label1 of labels) {\n        for (let label2 of labels) {\n            if (label1 !== label2 && isOverlapping(label1, label2)) return [label1, label2]\n        }\n    }\n    return null\n}\n\nfunction isOverlapping(label1, label2) {\n    return (\n        // label cannot collide with itself\n        label1 !== label2\n        &&\n            (label1.leftSide < label2.rightSide &&\n            label1.rightSide > label2.leftSide &&\n            label1.topSide < label2.bottomSide &&\n            label1.bottomSide > label2.topSide)\n    )\n}\n\n\n// function measureText(text){\n//     const { defaultFontSize, defaultFontFamily } = Chart.defaults.global\n//     const temp = document.createElement('span')\n//     temp.style.fontFamily = defaultFontFamily\n//     temp.style.fontSize = defaultFontSize\n//     // temp.style.opacity = 0\n//     temp.textContent = text\n//     document.body.append(temp)\n//     let size = temp.getBoundingClientRect()\n//     // temp.remove()\n//     return size\n// }\n\nexport default PieChart",["84","85"],"/Users/jameslandry/Desktop/Projects/kpi_reports/src/components/FertRates.js",[],"/Users/jameslandry/Desktop/Projects/kpi_reports/src/components/CleavageRates.js",[],"/Users/jameslandry/Desktop/Projects/kpi_reports/src/components/PregnancyRates.js",[],"/Users/jameslandry/Desktop/Projects/kpi_reports/src/components/PregRateByAge.js",[],"/Users/jameslandry/Desktop/Projects/kpi_reports/src/components/USRates.js",[],"/Users/jameslandry/Desktop/Projects/kpi_reports/src/components/BarChart.js",[],"/Users/jameslandry/Desktop/Projects/kpi_reports/src/components/MiscKPIs.js",[],"/Users/jameslandry/Desktop/Projects/kpi_reports/src/components/EditProfile.js",[],"/Users/jameslandry/Desktop/Projects/kpi_reports/src/components/PrivateRoute.js",[],"/Users/jameslandry/Desktop/Projects/kpi_reports/src/components/LogIn.js",["86"],"import React from 'react'\nimport {useState, useRef } from 'react'\nimport { useAuth } from '../contexts/AuthContext'\nimport { auth } from '../firebase'\nimport { Link, useHistory } from 'react-router-dom'\n\n\nconst login = (email, password) => {\n    return auth.signInWithEmailAndPassword(email, password)\n}\n\n\n\n\nconst LogIn = () => {\n\n    const emailRef = useRef()\n    const passwordRef = useRef()\n    // const { login } = useAuth\n    const [loading, setLoading] = useState(false)\n    const history = useHistory()\n \n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        try {\n            setLoading(true)\n            await login(emailRef.current.value, passwordRef.current.value)\n            history.push(\"/\")\n        } catch(error) {\n            alert(error.message)\n        }\n        setLoading(false)\n    }\n\n    return (\n        <div className=\"login_wrapper\">\n         \n            <div className=\"login_form\">\n                <div className=\"login_logo\">\n                    <img src=\"/images/impart_logo.png\" alt=\"Impart Quality\"/>\n                </div>\n                <form onSubmit={e => handleSubmit(e)}>\n                <input \n                        ref={emailRef}\n                        id= \"email\"\n                        name=\"email\"\n                        placeholder=\"enter email\"\n                        type=\"text\"\n                        />\n                    <input \n                        ref={passwordRef}\n                        id= \"password\"\n                        name=\"password\"\n                        placeholder=\"enter password\"\n                        type=\"password\"\n                        />\n                        <div>\n                            <button className=\"submit_button\" disabled={loading} type=\"submit\">Log In</button>\n                        </div>\n                </form>\n                <div>\n                <Link className=\"forgot_password\" to=\"/forgot-password\"  >Forgot Password?</Link>\n            </div>\n            </div>\n           \n        </div>\n    )\n}\n\nexport default LogIn","/Users/jameslandry/Desktop/Projects/kpi_reports/src/components/ForgotPassword.js",[],"/Users/jameslandry/Desktop/Projects/kpi_reports/src/contexts/AuthContext.js",[],"/Users/jameslandry/Desktop/Projects/kpi_reports/src/firebase.js",[],"/Users/jameslandry/Desktop/Projects/kpi_reports/src/components/Dashboard.js",["87","88"],"import React, {  useState } from 'react'\nimport { Link } from 'react-router-dom'\nimport { auth } from '../firebase'\nimport FertRates from './FertRates'\nimport CleavageRates from './CleavageRates'\nimport PregnancyRates from './PregnancyRates'\nimport PregRateByAge from './PregRateByAge'\nimport USRates  from './USRates'\nimport BarChart from './BarChart'\nimport MiscKPIs from './MiscKPIs'\nimport EditorJs from 'react-editor-js';\nimport * as XLSX from 'xlsx';\nimport List from '@editorjs/list'\n\nconst Dashboard = () => {\n\n    const [cleaveData, setCleaveData] = useState()\n    const [fertData, setFertData] = useState()\n    const [pregData, setPregData] = useState()\n    const [pregAgeData, setPregAgeData] = useState()\n    const [ultraSoundData, setUltraSoundData] = useState()\n    const [blastRateData, setBlastRateData] = useState()\n    const [miscKPIData, setMiscKPIData] = useState()\n\n    const data = {}\n    const list = List\n\n    const readExcel = (file) => {\n        \n        const promise = new Promise((resolve, reject) => {\n          const fileReader = new FileReader()\n          fileReader.readAsArrayBuffer(file)\n    \n          fileReader.onload =(e) => {\n            const bufferArray = e.target.result\n    \n            const wb = XLSX.read(bufferArray, {type: 'buffer'})\n    \n            const sheet1 = wb.SheetNames[0]\n            const sheet2 = wb.SheetNames[1]\n    \n            const ws1 = wb.Sheets[sheet1]\n            const ws2 = wb.Sheets[sheet2]\n    \n            const data = [\n              XLSX.utils.sheet_to_json(ws1),\n              XLSX.utils.sheet_to_json(ws2)\n          ]\n            resolve(data)\n          }\n          // fileReader.onError((error) => {\n          //   reject(error)\n          // })\n        })\n    \n        // after the data is set from sheet.js the following logic is specific to the data for the fertility clinic\n        promise.then((data) => {\n          \n          const arr1 = data[0]\n          const arr2 = data[1]\n\n          const retRateKeys = []\n           for(let key in arr1) {\n            retRateKeys.push(key)\n          }\n\n          const fetRateKeys = []\n\n          for( let key in arr2) {\n            fetRateKeys.push(key)\n          }\n         \n         const ret = []\n         const fet = []\n\n          function copyArray(array, newArr) {\n            for (let key in array){\n              newArr.push({})\n              let row = array[key]\n              let headers = Object.keys(row)\n              headers.forEach( header => {\n                let newKey = header.replace(/[^a-z0-9]/gi,'').toLowerCase()\n                newArr[key][newKey] = array[key][header]\n              })\n            }\n          }\n         \n          copyArray(arr1, ret)\n\n          copyArray(arr2, fet)\n         \n          \n          \n          const totalICSID = retRateKeys.filter( key => ret[key]['2pn'] !== 'n/a')\n    \n         \n    \n          const fertRateData = {\n            \"Total\": {\n              '2PN': 0,\n              '1PN': 0,\n              '>2PN': 0,\n              'Degen': 0,\n              '0PN': 0\n            }\n          }\n          totalICSID.forEach(key => {\n            \n           fertRateData[\"Total\"]['2PN'] += ret[key]['2pn'] \n           fertRateData[\"Total\"]['1PN'] += ret[key]['1pn'] \n           fertRateData[\"Total\"]['>2PN'] += ret[key]['abnormal'] \n           fertRateData[\"Total\"]['Degen'] += ret[key]['deg'] \n           fertRateData[\"Total\"]['0PN'] += ret[key]['0pn'] \n    \n          })\n    \n          \n          const techICSID = retRateKeys.filter( key => !ret[key]['icsitech'].includes('/'))\n          \n          techICSID.forEach(key => {\n            \n            if(!fertRateData[ret[key]['icsitech'].toUpperCase()]) {\n              \n              fertRateData[ret[key]['icsitech'].toUpperCase()] = {\n                '2PN': ret[key]['2pn'],\n                '1PN':  ret[key]['1pn'],\n                '>2PN': ret[key]['abnormal'],\n                'Degen': ret[key]['deg'],\n                '0PN': ret[key]['0pn']\n              }\n    \n            } else {\n              fertRateData[ret[key]['icsitech'].toUpperCase()]['2PN'] += ret[key]['2pn']\n              fertRateData[ret[key]['icsitech'].toUpperCase()]['1PN'] += ret[key]['1pn']\n              fertRateData[ret[key]['icsitech'].toUpperCase()]['>2PN'] += ret[key]['abnormal']\n              fertRateData[ret[key]['icsitech'].toUpperCase()]['Degen'] += ret[key]['deg']\n              fertRateData[ret[key]['icsitech'].toUpperCase()]['0PN'] += ret[key]['0pn']\n            }\n           \n           \n          })\n    \n          const cleaveDayThree = retRateKeys.filter( key => ret[key]['day3emb'] !== 'n/a')\n    \n          \n          const cleaveRateData = {\n            \"Total\": {\n              \"Good\": 0,\n              \"Poor\": 0,\n              \"Disc\": 0\n            }\n          }\n    \n          cleaveDayThree.forEach( key => {\n            \n            cleaveRateData[\"Total\"][\"Good\"] += ret[key]['d36c']\n            cleaveRateData[\"Total\"][\"Poor\"] += (ret[key]['day3emb'] - ret[key]['d36c'])\n            if(ret[key][\"2pn\"] > ret[key]['day3emb']){\n              cleaveRateData[\"Total\"][\"Disc\"] += (ret[key][\"2pn\"] - ret[key]['day3emb'])\n             \n            }\n            \n          })\n          \n         \n    \n          techICSID.forEach(key => {\n            \n            if(!cleaveRateData[ret[key]['icsitech']]) {\n              if(ret[key][\"2pn\"] > ret[key]['day3emb']) {\n                cleaveRateData[ret[key]['icsitech']] = {\n                  \"Good\": ret[key]['d36c'],\n                  \"Poor\":  (ret[key]['day3emb'] - ret[key]['d36c']),\n                  \"Disc\": (ret[key][\"2pn\"] - ret[key]['day3emb']),\n                }\n              } else {\n                cleaveRateData[ret[key]['icsitech']] = {\n                  \"Good\": ret[key]['d36c'],\n                  \"Poor\":  (ret[key]['day3emb'] - ret[key]['d36c']),\n                  \"Disc\": 0,\n                }\n              }\n    \n            } else {\n              cleaveRateData[ret[key]['icsitech']]['Good'] += ret[key]['d36c']\n              cleaveRateData[ret[key]['icsitech']]['Poor'] +=  (ret[key]['day3emb'] - ret[key]['d36c'])\n              if(ret[key][\"2pn\"] > ret[key]['day3emb']) {\n                cleaveRateData[ret[key]['icsitech']]['Disc'] += (ret[key][\"2pn\"] - ret[key]['day3emb'])\n              }\n              \n            }\n           \n           \n          })\n    \n    \n          const kpiData = {\n            'bioRes': {\n              'Total': 0,\n            },\n            'eupRate': {\n              \"Total\": 0,\n            },\n            'embWSurv': {\n              'Total': 0,\n            },\n            'ooWSurv': {\n              'Total': 0,\n            },\n            'avgRateEmbTrans': {\n              'Total': 0,\n            }\n          }\n          \n          const bioRateKeys = techICSID.filter( key => ret[key]['noread'] !== 'n/a')\n    \n    \n    \n          const setRate = (array, keys, techIdentifier, numerator, denominator) => {\n            let techs = {\n              \"Total\": {\n                \"numerator\": 0,\n                \"denominator\": 0\n              },\n            }\n              keys.forEach(key => {\n                if(!techs[array[key][techIdentifier].toUpperCase()]) {\n                  techs[array[key][techIdentifier].toUpperCase()] = {\n                    \"numerator\": array[key][numerator],\n                    'denominator': array[key][denominator]\n                  }\n                  \n                  techs[\"Total\"][\"numerator\"] += array[key][numerator]\n                  techs[\"Total\"][\"denominator\"] += array[key][denominator]\n                } else {\n                  techs[array[key][techIdentifier].toUpperCase()][\"numerator\"] += array[key][numerator]\n                  techs[array[key][techIdentifier].toUpperCase()][\"denominator\"] += array[key][denominator]\n                  techs[\"Total\"][\"numerator\"] += array[key][numerator]\n                  techs[\"Total\"][\"denominator\"] += array[key][denominator]\n                }\n              })\n    \n              for(let techName in techs) {\n                let tech = techs[techName]\n                tech.rate = tech.numerator / tech.denominator\n              }\n              return techs\n          }\n    \n          const bioResults = setRate(ret, bioRateKeys, \"icsitech\", \"noread\", \"totalbx\")\n          const blastRateData = setRate(ret, techICSID, \"icsitech\", \"totalusableblast\", \"2pn\")\n          \n          const eupRate = setRate(ret, bioRateKeys,\"icsitech\", \"euploid\", \"totalbx\")\n    \n          const embWarmSurvRate = setRate(fet, fetRateKeys, \"thawtech\", \"blastsurvived\", 'blastthawed')\n    \n          // once spreadsheet is updated to include a did not survive row, will be added to Pending add below to add this KPI.\n          // const oOcyteKeys = techICSID.filter( key => ret[key][\"Procedure\"] === \"DE Thaw-GBV\")\n          // const ooWSurvRate = setRate(arr1, oOcyteKeys, \"icsitech\", \"Pending add\", \"procedure\" )\n          // kpiData[\"ooWSurv\"] = ooWSurvRate\n    \n          for(let key in fet) {\n            let age = fet[key]['agegroup']\n            let blastTrans = fet[key]['blasttrans']\n            if(!kpiData['avgRateEmbTrans'][age]) {\n              kpiData['avgRateEmbTrans'][age] = { \n                \"denominator\": 1, \n                \"numerator\": blastTrans\n            }\n              kpiData['avgRateEmbTrans']['Total'] = {\n                \"denominator\": 1,\n                \"numerator\": blastTrans\n              }\n            } else {\n              kpiData['avgRateEmbTrans'][age][\"denominator\"] += 1\n              kpiData['avgRateEmbTrans'][age][\"numerator\"] += blastTrans\n              kpiData['avgRateEmbTrans']['Total'][\"denominator\"] += 1\n              kpiData['avgRateEmbTrans']['Total']['numerator'] += blastTrans\n            }\n          }\n    \n          for(let key in kpiData['avgRateEmbTrans']) {\n            let rate = kpiData['avgRateEmbTrans'][key]['numerator'] / kpiData['avgRateEmbTrans'][key]['denominator']\n            kpiData['avgRateEmbTrans'][key].rate = rate\n          }\n    \n          \n    \n          kpiData['eupRate'] = eupRate\n    \n          kpiData['embWSurv'] = embWarmSurvRate\n          \n          kpiData['bioRes'] = bioResults\n\n          \n          \n    \n          const fetPregRateData = fetRateKeys.filter(key => fet[key]['agegroup'] === '25-34' || fet[key]['agegroup'] === '35-37')\n    \n          \n          const pregRateData = {\n            \"Total\": {\n              \"Pos\": 0,\n              \"Neg\": 0\n            },\n            \"Thaw tech\": {},\n            \"Vit tech\": {}, \n            \"Trans Doctor\": {},\n            \"Trans tech\": {},\n          }\n    \n          fetPregRateData.forEach( key => {\n            fet[key][\"posneg\"] === \"POS\" ? pregRateData[\"Total\"][\"Pos\"] +=1 : pregRateData[\"Total\"][\"Neg\"] +=1\n          })\n    \n          \n    \n          const setPregRateDataByTech = (tech, keys, hashKey) => {\n            keys.forEach(key => {\n              if(!pregRateData[hashKey][fet[key][tech].toUpperCase()]) {\n                if(fet[key]['posneg'] === 'POS') {\n                  pregRateData[hashKey][fet[key][tech].toUpperCase()] = {\n                    \"Pos\": 1,\n                    \"Neg\": 0\n                  }\n                }\n                else {\n                  pregRateData[hashKey][fet[key][tech].toUpperCase()] = {\n                    \"Pos\": 0,\n                    \"Neg\": 1\n                  }\n                } \n      \n              } else {\n                fet[key]['posneg'] === 'POS' ? pregRateData[hashKey][fet[key][tech].toUpperCase()][\"Pos\"] += 1 : pregRateData[hashKey][fet[key][tech].toUpperCase()][\"Neg\"] += 1\n              }\n            })\n          }\n        \n          \n          setPregRateDataByTech(\"transmd\", fetPregRateData, \"Trans Doctor\")\n          setPregRateDataByTech(\"transemb\", fetPregRateData, \"Trans tech\")\n          setPregRateDataByTech(\"vittech\", fetPregRateData, \"Vit tech\")\n          setPregRateDataByTech(\"thawtech\", fetPregRateData, \"Thaw tech\")\n    \n          const pregDataByAge = {\n            \"Total\": {\n              \"Neg\": 0,\n              \"BC\": 0,\n              \"Pos\": 0,\n            },\n            \"<35\": {\n              \"Neg\": 0,\n              \"BC\": 0,\n              \"Pos\": 0,\n            },\n            \"35-37\": {\n              \"Neg\": 0,\n              \"BC\": 0,\n              \"Pos\": 0,\n            },\n            \"38-40\": {\n              \"Neg\": 0,\n              \"BC\": 0,\n              \"Pos\": 0,\n            },\n            \"41-42\": {\n              \"Neg\": 0,\n              \"BC\": 0,\n              \"Pos\": 0,\n            },\n            \">42\": {\n              \"Neg\": 0,\n              \"BC\": 0,\n              \"Pos\": 0,\n            },\n            \"Donor\": {\n              \"Neg\": 0,\n              \"BC\": 0,\n              \"Pos\": 0,\n            }, \n          }\n    \n         const setPregDataByAge = (keys, ageGroup, age) => {\n            keys.forEach(key => {\n                \n              if(fet[key]['agegroup'].toLowerCase() === ageGroup){\n                if(fet[key]['posneg'] === \"POS\") {\n                  if(fet[key]['sacs'] === 0){\n                    pregDataByAge[age][\"BC\"] ++\n                    pregDataByAge[\"Total\"][\"BC\"] ++\n                  } else {\n                    pregDataByAge[age][\"Pos\"] ++\n                    pregDataByAge[\"Total\"][\"Pos\"] ++\n                  }\n                } else {\n                  pregDataByAge[age][\"Neg\"] ++\n                  pregDataByAge[\"Total\"][\"Neg\"] ++\n                }\n              } \n            })\n         }\n    \n         \n    \n         setPregDataByAge(fetRateKeys, \"35-37\", \"35-37\")\n         setPregDataByAge(fetRateKeys, \"donor\", \"Donor\")\n         setPregDataByAge(fetRateKeys, \"25-34\", \"<35\")\n         setPregDataByAge(fetRateKeys, \"41-42\", \"41-42\")\n         setPregDataByAge(fetRateKeys, \"38-40\", \"38-40\")\n         setPregDataByAge(fetRateKeys, \"43-50\", \">42\")\n            \n    \n         const ultraSoundData = {\n          \"Total\": {\n            \"HB\": 0,\n            \"No HB\": 0,\n            \"Mult HB\": 0,\n            \"Mult No HB\": 0,\n          },\n          \"<35\": {\n            \"HB\": 0,\n            \"No HB\": 0,\n            \"Mult HB\": 0,\n            \"Mult No HB\": 0,\n          },\n          \"35-37\": {\n            \"HB\": 0,\n            \"No HB\": 0,\n            \"Mult HB\": 0,\n            \"Mult No HB\": 0,\n          },\n          \"38-40\": {\n            \"HB\": 0,\n            \"No HB\": 0,\n            \"Mult HB\": 0,\n            \"Mult No HB\": 0,\n          },\n          \"41-42\": {\n            \"HB\": 0,\n            \"No HB\": 0,\n            \"Mult HB\": 0,\n            \"Mult No HB\": 0,\n          },\n          \">42\": {\n            \"HB\": 0,\n            \"No HB\": 0,\n            \"Mult HB\": 0,\n            \"Mult No HB\": 0,\n          },\n          \"Donor\": {\n            \"HB\": 0,\n            \"No HB\": 0,\n            \"Mult HB\": 0,\n            \"Mult No HB\": 0,\n          }, \n        }\n    \n        const setUltraSoundDataByAge = (keys, ageGroup, age) => {\n          keys.forEach(key => {\n              \n            if(fet[key]['agegroup'].toLowerCase() === ageGroup){\n              if(fet[key]['posneg'] === \"POS\") {\n                if(fet[key][\"blasttrans\"] > 1){\n                  if(fet[key]['hb'] === 0){\n                    ultraSoundData[age][\"Mult No HB\"] ++\n                    ultraSoundData[\"Total\"][\"Mult No HB\"] ++\n                  } else {\n                    ultraSoundData[age][\"Mult HB\"] ++\n                    ultraSoundData[\"Total\"][\"Mult HB\"] ++\n                  }\n                } else{\n                  if(fet[key]['hb'] === 0){\n                    ultraSoundData[age][\"No HB\"] ++\n                    ultraSoundData[\"Total\"][\"No HB\"] ++\n                  } else {\n                    ultraSoundData[age][\"HB\"] ++\n                    ultraSoundData[\"Total\"][\"HB\"] ++\n                  }\n                }\n              } \n            } \n          })\n       }\n    \n          setUltraSoundDataByAge(fetRateKeys, \"35-37\", \"35-37\")\n          setUltraSoundDataByAge(fetRateKeys, \"donor\", \"Donor\")\n          setUltraSoundDataByAge(fetRateKeys, \"25-34\", \"<35\")\n          setUltraSoundDataByAge(fetRateKeys, \"41-42\", \"41-42\")\n          setUltraSoundDataByAge(fetRateKeys, \"38-40\", \"38-40\")\n          setUltraSoundDataByAge(fetRateKeys, \"43-50\", \">42\")\n    \n    \n          setCleaveData(cleaveRateData)\n          setFertData(fertRateData)\n          setPregData(pregRateData)\n          setPregAgeData(pregDataByAge)\n          setUltraSoundData(ultraSoundData)\n          setBlastRateData(blastRateData)\n          setMiscKPIData(kpiData)\n          \n    \n        })\n      }\n\n      function logout() {\n        return auth.signOut()\n      }\n\n    return (\n        <div className=\"wrapper\">\n            <div className=\"menu\">\n              <div className=\"edit_profile_button\" >\n                <Link to='/edit-profile'>Welcome Michael</Link> \n              </div>\n                <div className=\"logout_button\" onClick={logout} > Log Out</div>\n            </div>\n            <div className=\"upload\">\n              <input type=\"file\" onChange={(e) => {\n              const file = e.target.files[0]\n              readExcel(file)\n              }} />\n            </div>\n         \n            <div className=\"content_wrapper\">\n              <div className=\"print_heading\">\n                <div className=\"logo\">\n                  <img src=\"images/impart_logo.png\" />\n                </div>\n                <div className=\"title\">\n                  KPI Report\n                </div>\n                <div className=\"logo_two\">\n                  <img src='images/denver_fertility_logo.png' />\n                </div>\n                <div className=\"clinic_name\">\n\n                </div>\n              </div>\n              <div>\n\n              </div>\n            {fertData? <div className=\"kpi_wrapper\" ><div><FertRates fertData={fertData}  /></div> <div className=\"text_box\"> <CustomEditor data={data} tools={{list: list}}/></div></div> : null}\n            {cleaveData? <div className=\"kpi_wrapper\"><div>  <CleavageRates cleaveData={cleaveData}  /> </div> <div className=\"text_box\"><CustomEditor data={data} tools={{list: list}} /></div></div>: null}\n            {pregData? <div className=\"kpi_wrapper\"><div> <PregnancyRates pregData={pregData} /> </div> <div className=\"text_box\"> <CustomEditor data={data} tools={{list: list}} /></div></div> : null}\n            {pregAgeData? <div className=\"kpi_wrapper\"> <div><PregRateByAge pregData={pregAgeData} /></div> <div className=\"text_box\"> <CustomEditor data={data} tools={{list: list}} /></div> </div>: null}\n            {ultraSoundData? <div className=\"kpi_wrapper\"> <div><USRates ultraSoundData={ultraSoundData} /> </div> <div className=\"text_box\" > <CustomEditor data={data} tools={{list: list}} /></div> </div>: null}\n            {blastRateData? <div className=\"kpi_wrapper\"> <div className=\"chart_header\">Blast Rates</div><div><BarChart data={blastRateData}/> </div> <div className=\"text_box\"> <CustomEditor data={data} tools={{list: list}} /></div></div> : null}\n            {miscKPIData ? <div className=\"kpi_wrapper\"> <div> <MiscKPIs data={miscKPIData} /> </div> <div className=\"text_box\"> <CustomEditor data={data} tools={{list: list}} /></div> </div> : null}\n            </div>\n        </div>\n    )\n}\n\n\n// editor.js auto sets the margin bottom to 300 and would not let it override in the css file\n// this is the solution that worked to reduce the margin.\nfunction CustomEditor(props){\n  return (\n    <div style={{ overflow: 'hidden', marginBottom: -270}}>\n      <EditorJs {...props}/>\n    </div>\n  )\n}\n\nexport default Dashboard\n",{"ruleId":"89","replacedBy":"90"},{"ruleId":"91","replacedBy":"92"},{"ruleId":"93","severity":1,"message":"94","line":1,"column":17,"nodeType":"95","messageId":"96","endLine":1,"endColumn":25},{"ruleId":"93","severity":1,"message":"97","line":82,"column":26,"nodeType":"95","messageId":"96","endLine":82,"endColumn":34},{"ruleId":"89","replacedBy":"98"},{"ruleId":"91","replacedBy":"99"},{"ruleId":"93","severity":1,"message":"100","line":3,"column":10,"nodeType":"95","messageId":"96","endLine":3,"endColumn":17},{"ruleId":"101","severity":1,"message":"102","line":528,"column":19,"nodeType":"103","endLine":528,"endColumn":55},{"ruleId":"101","severity":1,"message":"102","line":534,"column":19,"nodeType":"103","endLine":534,"endColumn":65},"no-native-reassign",["104"],"no-negated-in-lhs",["105"],"no-unused-vars","'useState' is defined but never used.","Identifier","unusedVar","'drawLine' is defined but never used.",["104"],["105"],"'useAuth' is defined but never used.","jsx-a11y/alt-text","img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","JSXOpeningElement","no-global-assign","no-unsafe-negation"]